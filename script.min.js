var colorBlock=document.getElementById("color-block"),ctx1=colorBlock.getContext("2d"),width1=colorBlock.width,height1=colorBlock.height,colorStrip=document.getElementById("color-strip"),ctx2=colorStrip.getContext("2d"),width2=colorStrip.width,height2=colorStrip.height,colorLabel=document.getElementById("color-label"),x=0,y=0,drag=!1,rgbaColor="rgba(255,0,0,1)";ctx1.rect(0,0,width1,height1),fillGradient(),ctx2.rect(0,0,width2,height2);var grd1=ctx2.createLinearGradient(0,0,0,height1);function click(o){x=o.offsetX,y=o.offsetY;var t=ctx2.getImageData(x,y,1,1).data;rgbaColor="rgba("+t[0]+","+t[1]+","+t[2]+",1)",fillGradient()}function fillGradient(){ctx1.fillStyle=rgbaColor,ctx1.fillRect(0,0,width1,height1);var o=ctx2.createLinearGradient(0,0,width1,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),ctx1.fillStyle=o,ctx1.fillRect(0,0,width1,height1);var t=ctx2.createLinearGradient(0,0,0,height1);t.addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,1)"),ctx1.fillStyle=t,ctx1.fillRect(0,0,width1,height1)}function mousedown(o){drag=!0,changeColor(o)}function mousemove(o){drag&&changeColor(o)}function mouseup(o){drag=!1}function changeColor(o){x=o.offsetX,y=o.offsetY;var t=ctx1.getImageData(x,y,1,1).data;rgbaColor="rgba("+t[0]+","+t[1]+","+t[2]+",1)",colorLabel.style.backgroundColor=rgbaColor}grd1.addColorStop(0,"rgba(255, 0, 0, 1)"),grd1.addColorStop(.17,"rgba(255, 255, 0, 1)"),grd1.addColorStop(.34,"rgba(0, 255, 0, 1)"),grd1.addColorStop(.51,"rgba(0, 255, 255, 1)"),grd1.addColorStop(.68,"rgba(0, 0, 255, 1)"),grd1.addColorStop(.85,"rgba(255, 0, 255, 1)"),grd1.addColorStop(1,"rgba(255, 0, 0, 1)"),ctx2.fillStyle=grd1,ctx2.fill(),colorStrip.addEventListener("click",click,!1),colorBlock.addEventListener("mousedown",mousedown,!1),colorBlock.addEventListener("mouseup",mouseup,!1),colorBlock.addEventListener("mousemove",mousemove,!1);
